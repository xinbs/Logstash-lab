# üåä Logstash MCP Server ‰ΩøÁî®ÊåáÂçó

**Server-Sent Events ÂÆûÊó∂ÊµÅÂºè Logstash ÊµãËØïÊúçÂä°**

## üìã Ê¶ÇËø∞

Logstash MCP Server ÊòØÂü∫‰∫é Server-Sent Events ÁöÑÂÆûÊó∂ÊµÅÂºèÊúçÂä°Âô®ÔºåÊèê‰æõ**ÂÆûÊó∂ËøõÂ∫¶ÂèçÈ¶à**Âíå**ÊµÅÂºèÊµãËØïÁªìÊûú**„ÄÇÂêåÊó∂ÊîØÊåÅÊ†áÂáÜ REST API Âíå SSE ÊµÅÂºèÊé•Âè£ÔºåÁâπÂà´ÈÄÇÂêà AI ÂÆûÊó∂ÁõëÊéßÈïøÊó∂Èó¥ËøêË°åÁöÑÊµãËØïÊµÅÁ®ã„ÄÇ

## ‚ú® Ê†∏ÂøÉÁâπÊÄß

- üåä **Server-Sent Events (SSE) ÊîØÊåÅ**
- ‚ö° **ÂÆûÊó∂ËøõÂ∫¶ÂèçÈ¶à**
- üìä **ÊµÅÂºèÊµãËØïÁªìÊûú**
- üîÑ **Ê≠•È™§Á∫ßËøõÂ∫¶ËøΩË∏™**
- üéØ **ÊâÄÊúâÊ†áÂáÜ MCP Â∑•ÂÖ∑**
- üß™ **ÂÜÖÁΩÆÊµãËØïÈ°µÈù¢**

## üöÄ Âø´ÈÄüÂºÄÂßã

### ÂêØÂä®ÊúçÂä°

```bash
# ‰ΩøÁî® Docker ComposeÔºàÊé®ËçêÔºâ
cd /path/to/Logstash-lab
sudo docker compose up -d --build

# Êàñ‰ΩøÁî®‰∏ÄÈîÆÂêØÂä®ËÑöÊú¨
./start.sh

# ÊúçÂä°Âú∞ÂùÄ: http://localhost:19001
```

## üîó MCP ÂÆ¢Êà∑Á´ØÈÖçÁΩÆ

### üìÑ JSON ÈÖçÁΩÆÊñπÂºèÔºàÊé®ËçêÔºâ

#### ‚úÖ ÊñπÊ≥ï‰∏ÄÔºöURL Áõ¥ËøûÔºàÊé®ËçêÔºâ

Âú® AI ÂÆ¢Êà∑Á´ØÁöÑ MCP ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºàÂ¶Ç `~/.cursor/mcp.json`ÔºâÔºö

```json
{
  "mcpServers": {
    "logstash-test": {
      "url": "http://localhost:19001/mcp",
      "description": "Logstash ËßÑÂàôÊµãËØïÂíåË∞ÉËØïÂ∑•ÂÖ∑"
    }
  }
}
```

**ÂÖ∂‰ªñÁΩëÁªúÁéØÂ¢ÉÁ§∫‰æã**Ôºö
```json
# Â±ÄÂüüÁΩëÈÉ®ÁΩ≤
{
  "mcpServers": {
    "logstash-test": {
      "url": "http://YOUR_SERVER_IP:19001/mcp",
      "description": "Logstash ËßÑÂàôÊµãËØïÂíåË∞ÉËØïÂ∑•ÂÖ∑"
    }
  }
}
```


### üîß ÈÖçÁΩÆÊ≠•È™§

1. **ÊâæÂà∞ÈÖçÁΩÆÊñá‰ª∂‰ΩçÁΩÆ**
   ```bash
   # Cursor ÈÖçÁΩÆÊñá‰ª∂
   ~/.cursor/mcp.json
   
   # Claude Desktop ÈÖçÁΩÆÊñá‰ª∂ (macOS)
   ~/Library/Application Support/Claude/claude_desktop_config.json
   
   # Claude Desktop ÈÖçÁΩÆÊñá‰ª∂ (Windows)
   %APPDATA%/Claude/claude_desktop_config.json
   ```

2. **ÂàõÂª∫ÊàñÁºñËæëÈÖçÁΩÆÊñá‰ª∂**
   ```bash
   # ÂàõÂª∫ÁõÆÂΩïÔºàÂ¶ÇÊûú‰∏çÂ≠òÂú®Ôºâ
   mkdir -p ~/.cursor
   
   # ÁºñËæëÈÖçÁΩÆÊñá‰ª∂
   nano ~/.cursor/mcp.json
   ```

3. **Â∫îÁî®ÈÖçÁΩÆ**
   - ‰øùÂ≠òÈÖçÁΩÆÊñá‰ª∂
   - ÂÆåÂÖ®ÈáçÂêØ AI ÂÆ¢Êà∑Á´ØÂ∫îÁî®
   - Ê£ÄÊü•Â∑•ÂÖ∑Ê†áÁ≠æÈ°µ‰∏≠ÊòØÂê¶ÊòæÁ§∫ Logstash Â∑•ÂÖ∑

### üß™ ÈÖçÁΩÆÈ™åËØÅ

ÈÖçÁΩÆÊàêÂäüÂêéÔºåÂú® AI ÂØπËØù‰∏≠Â∫îËØ•ÂèØ‰ª•ÁúãÂà∞‰ª•‰∏ã 8 ‰∏™Â∑•ÂÖ∑Ôºö

1. **upload_pipeline** - ‰∏ä‰º† Pipeline ÈÖçÁΩÆÊñá‰ª∂
2. **send_test_log** - ÂèëÈÄÅÊµãËØïÊó•Âøó
3. **get_parsed_results** - Ëé∑ÂèñËß£ÊûêÁªìÊûú
4. **clear_results** - Ê∏ÖÁ©∫ÂéÜÂè≤ÁªìÊûú
5. **get_logstash_logs** - Ëé∑Âèñ Logstash Êó•Âøó
6. **test_pipeline_complete_stream** - ÂÆåÊï¥ÊµÅÂºèÊµãËØï
7. **get_test_guidance** - Êô∫ËÉΩÊµãËØïÊåáÂØº ‚ú®
8. **health_check** - ÂÅ•Â∫∑Ê£ÄÊü•

### üåê HTTP API ÈÖçÁΩÆ

Â¶ÇÊûúÊÇ®ÁöÑ AI ÂÆ¢Êà∑Á´Ø‰∏çÊîØÊåÅ MCP ÂçèËÆÆÔºå‰πüÂèØ‰ª•Áõ¥Êé•‰ΩøÁî® HTTP APIÔºö

#### Âü∫Á°ÄÁ´ØÁÇπ
```bash
# MCP JSON-RPC 2.0 ÂçèËÆÆÁ´ØÁÇπ
POST http://localhost:19001/mcp

# Â∑•ÂÖ∑ÂàóË°®
POST http://localhost:19001/mcp
Content-Type: application/json
{
  "jsonrpc": "2.0",
  "method": "list_tools",
  "id": 1
}

# Ë∞ÉÁî®Â∑•ÂÖ∑
POST http://localhost:19001/mcp
Content-Type: application/json
{
  "jsonrpc": "2.0",
  "method": "call_tool",
  "params": {
    "name": "health_check",
    "arguments": {}
  },
  "id": 2
}
```

#### REST API Á´ØÁÇπÔºàÂêëÂêéÂÖºÂÆπÔºâ
```bash
# ÂÅ•Â∫∑Ê£ÄÊü•
GET http://192.168.31.218:19001/tools/health_check

# ‰∏ä‰º†ÈÖçÁΩÆ
POST http://192.168.31.218:19001/tools/upload_pipeline

# ÂèëÈÄÅÊµãËØïÊó•Âøó
POST http://192.168.31.218:19001/tools/send_test_log

# Ëé∑ÂèñËß£ÊûêÁªìÊûú
GET http://192.168.31.218:19001/tools/get_parsed_results
```

### È™åËØÅÊúçÂä°Áä∂ÊÄÅ

```bash
# ÂÅ•Â∫∑Ê£ÄÊü•
curl http://localhost:19001/tools/health_check

# Êü•ÁúãÂèØÁî®Â∑•ÂÖ∑
curl http://localhost:19001/ | jq '.available_tools'

# ËÆøÈóÆÊµãËØïÈ°µÈù¢
open http://localhost:19001/test
```

### Docker ÈÉ®ÁΩ≤

Êõ¥Êñ∞ `docker-compose.yml` Ê∑ªÂä† SSE ÊúçÂä°Ôºö

```yaml
  sse-server:
    build: ./mcp_server
    command: python sse_mcp_server.py
    container_name: logstash-lab-sse
    ports:
      - "19002:19002"
    environment:
      - LOGSTASH_SERVICE_URL=http://web:19000
    depends_on:
      - web
```

## üåä SSE ÊµÅÂºèÊé•Âè£

### Ê†∏ÂøÉ SSE Êé•Âè£

**GET** `/sse/test_pipeline_complete`

ÂÆåÊï¥ÁöÑ Pipeline ÊµãËØïÊµÅÁ®ãÔºåÊèê‰æõÂÆûÊó∂ËøõÂ∫¶ÂèçÈ¶à„ÄÇ

**Êü•ËØ¢ÂèÇÊï∞**:
- `pipeline_content` (required): Pipeline ÈÖçÁΩÆÂÜÖÂÆπ
- `test_logs` (required): ÊµãËØïÊó•ÂøóÂàóË°®ÔºàJSON ÁºñÁ†ÅÂ≠óÁ¨¶‰∏≤Ôºâ
- `is_json` (optional): ÊòØÂê¶‰∏∫ JSON Ê†ºÂºèÔºåÈªòËÆ§ false
- `wait_time` (optional): Á≠âÂæÖÁÉ≠ÈáçËΩΩÊó∂Èó¥ÔºåÈªòËÆ§ 3 Áßí

**ÂìçÂ∫îÊ†ºÂºè**: `text/event-stream`

### ‰∫ã‰ª∂Á±ªÂûã

SSE ÊµÅ‰ºöÂèëÈÄÅ‰ª•‰∏ãÁ±ªÂûãÁöÑ‰∫ã‰ª∂Ôºö

- **`start`** - ÊµÅÁ®ãÂºÄÂßã
- **`progress`** - ËøõÂ∫¶Êõ¥Êñ∞
- **`success`** - Ê≠•È™§ÊàêÂäü
- **`error`** - ÈîôËØØ‰ø°ÊÅØ
- **`warning`** - Ë≠¶Âëä‰ø°ÊÅØ
- **`complete`** - ÊµÅÁ®ãÂÆåÊàê

### ‰∫ã‰ª∂Êï∞ÊçÆÊ†ºÂºè

```json
{
  "type": "progress",
  "timestamp": "2024-01-01T10:00:00.000Z",
  "data": {
    "step": "upload_pipeline",
    "message": "Ê≠£Âú®‰∏ä‰º† Pipeline ÈÖçÁΩÆ...",
    "progress": 50
  }
}
```

## üíª ÂÆ¢Êà∑Á´Ø‰ΩøÁî®Á§∫‰æã

### JavaScript (EventSource)

```javascript
function startSSETest(pipelineContent, testLogs) {
    // ÊûÑÂª∫Êü•ËØ¢ÂèÇÊï∞
    const params = new URLSearchParams({
        pipeline_content: pipelineContent,
        test_logs: JSON.stringify(testLogs),
        is_json: 'false',
        wait_time: '3'
    });
    
    const url = `http://localhost:19002/sse/test_pipeline_complete?${params.toString()}`;
    
    // ÂàõÂª∫ SSE ËøûÊé•
    const eventSource = new EventSource(url);
    
    eventSource.onopen = function(event) {
        console.log('‚úÖ SSE ËøûÊé•Â∑≤Âª∫Á´ã');
    };
    
    eventSource.onmessage = function(event) {
        try {
            const data = JSON.parse(event.data);
            console.log(`[${data.type}] ${data.data.message}`);
            
            // Ê†πÊçÆ‰∫ã‰ª∂Á±ªÂûãÂ§ÑÁêÜ
            switch(data.type) {
                case 'start':
                    console.log('üöÄ ÊµãËØïÂºÄÂßã');
                    break;
                case 'progress':
                    console.log(`‚è≥ ${data.data.step}: ${data.data.message}`);
                    break;
                case 'success':
                    console.log(`‚úÖ ${data.data.step}: ${data.data.message}`);
                    break;
                case 'error':
                    console.error(`‚ùå ${data.data.step}: ${data.data.message}`);
                    break;
                case 'complete':
                    console.log('üéâ ÊµãËØïÂÆåÊàê');
                    eventSource.close();
                    break;
            }
        } catch (e) {
            console.error('Ëß£Êûê‰∫ã‰ª∂Â§±Ë¥•:', event.data);
        }
    };
    
    eventSource.onerror = function(event) {
        console.error('‚ùå SSE ËøûÊé•ÈîôËØØ');
        eventSource.close();
    };
    
    return eventSource;
}

// ‰ΩøÁî®Á§∫‰æã
const pipelineConfig = `
input { http { port => 15515 } }
filter {
  if "apache" == [@metadata][type] {
    grok { match => { "message" => "%{COMBINEDAPACHELOG}" } }
  }
}
output { file { path => "/data/out/events.ndjson" } }
`;

const testLogs = [
    '127.0.0.1 - - [25/Dec/2023:10:00:00 +0000] "GET /index.html HTTP/1.1" 200 2326'
];

const eventSource = startSSETest(pipelineConfig, testLogs);
```

### Python ÂÆ¢Êà∑Á´Ø

```python
import requests
import json
import sseclient  # pip install sseclient-py

def sse_test_pipeline(pipeline_content, test_logs, base_url="http://localhost:19002"):
    """SSE ÊµÅÂºèÊµãËØï Pipeline"""
    
    # ÊûÑÂª∫Êü•ËØ¢ÂèÇÊï∞
    params = {
        'pipeline_content': pipeline_content,
        'test_logs': json.dumps(test_logs),
        'is_json': 'false',
        'wait_time': '3'
    }
    
    url = f"{base_url}/sse/test_pipeline_complete"
    
    # ÂàõÂª∫ SSE ËøûÊé•
    response = requests.get(url, params=params, stream=True, headers={
        'Accept': 'text/event-stream',
        'Cache-Control': 'no-cache'
    })
    
    if response.status_code != 200:
        raise Exception(f"SSE ËøûÊé•Â§±Ë¥•: {response.status_code}")
    
    print("‚úÖ SSE ËøûÊé•Â∑≤Âª∫Á´ã")
    
    # Â§ÑÁêÜ SSE ‰∫ã‰ª∂
    client = sseclient.SSEClient(response)
    
    for event in client.events():
        try:
            data = json.loads(event.data)
            event_type = data.get('type', 'unknown')
            message = data.get('data', {}).get('message', '')
            timestamp = data.get('timestamp', '')
            
            print(f"[{timestamp}] {event_type.upper()}: {message}")
            
            # Ê†πÊçÆ‰∫ã‰ª∂Á±ªÂûãÂ§ÑÁêÜ
            if event_type == 'start':
                print("üöÄ ÊµãËØïÂºÄÂßã")
            elif event_type == 'progress':
                step = data.get('data', {}).get('step', '')
                print(f"‚è≥ {step}: {message}")
            elif event_type == 'success':
                step = data.get('data', {}).get('step', '')
                print(f"‚úÖ {step}: {message}")
            elif event_type == 'error':
                step = data.get('data', {}).get('step', '')
                print(f"‚ùå {step}: {message}")
                break
            elif event_type == 'complete':
                print("üéâ ÊµãËØïÂÆåÊàê")
                break
                
        except json.JSONDecodeError as e:
            print(f"Ëß£Êûê‰∫ã‰ª∂Â§±Ë¥•: {event.data}")
    
    print("üîå SSE ËøûÊé•ÂÖ≥Èó≠")

# ‰ΩøÁî®Á§∫‰æã
pipeline_config = """
input { http { port => 15515 } }
filter {
  if "apache" == [@metadata][type] {
    grok { match => { "message" => "%{COMBINEDAPACHELOG}" } }
  }
}
output { file { path => "/data/out/events.ndjson" } }
"""

test_logs = [
    '127.0.0.1 - - [25/Dec/2023:10:00:00 +0000] "GET /index.html HTTP/1.1" 200 2326'
]

sse_test_pipeline(pipeline_config, test_logs)
```

### cURL Á§∫‰æã

```bash
# URL ÁºñÁ†ÅÂèÇÊï∞
PIPELINE_CONTENT="input%20%7B%20http%20%7B%20port%20%3D%3E%2015515%20%7D%20%7D%0Afilter%20%7B%0A%20%20if%20%22apache%22%20%3D%3D%20%5B%40metadata%5D%5Btype%5D%20%7B%0A%20%20%20%20grok%20%7B%20match%20%3D%3E%20%7B%20%22message%22%20%3D%3E%20%22%25%7BCOMBINEDAPACHELOG%7D%22%20%7D%20%7D%0A%20%20%7D%0A%7D%0Aoutput%20%7B%20file%20%7B%20path%20%3D%3E%20%22%2Fdata%2Fout%2Fevents.ndjson%22%20%7D%20%7D"

TEST_LOGS='%5B%22127.0.0.1%20-%20-%20%5B25%2FDec%2F2023%3A10%3A00%3A00%20%2B0000%5D%20%5C%22GET%20%2Findex.html%20HTTP%2F1.1%5C%22%20200%202326%22%5D'

# SSE ÊµÅÂºèËØ∑Ê±Ç
curl -N -H "Accept: text/event-stream" \
  "http://localhost:19002/sse/test_pipeline_complete?pipeline_content=${PIPELINE_CONTENT}&test_logs=${TEST_LOGS}&is_json=false&wait_time=3"
```

## üõ†Ô∏è Ê†áÂáÜ REST API

SSE ÊúçÂä°Âô®ÂêåÊó∂Êèê‰æõÊâÄÊúâÊ†áÂáÜÁöÑ REST API Êé•Âè£Ôºå‰∏é `network_mcp_server.py` ÂÆåÂÖ®ÂÖºÂÆπÔºö

- `POST /tools/upload_pipeline`
- `POST /tools/send_test_log`
- `GET /tools/get_parsed_results`
- `POST /tools/clear_results`
- `GET /tools/get_logstash_logs`
- `GET /tools/health_check`

## üß™ ÂÜÖÁΩÆÊµãËØïÈ°µÈù¢

ËÆøÈóÆ `http://localhost:19002/test` Êü•ÁúãÂÜÖÁΩÆÁöÑ SSE ÊµãËØïÈ°µÈù¢ÔºåÊèê‰æõÔºö

- üìù Pipeline ÈÖçÁΩÆÁºñËæëÂô®
- üìã ÊµãËØïÊó•ÂøóÁºñËæëÂô®
- üåä ÂÆûÊó∂ SSE ÊµÅÊòæÁ§∫
- üé® ‰∫ã‰ª∂Á±ªÂûãÈ´ò‰∫Æ

## üìä ‰∫ã‰ª∂ÊµÅÁ§∫‰æã

ÂÆåÊï¥ÊµãËØïÊµÅÁ®ãÁöÑ‰∫ã‰ª∂Â∫èÂàóÔºö

```
1. start: ÂºÄÂßã Pipeline ÊµãËØïÊµÅÁ®ã
2. progress: Ê≠£Âú®Ê£ÄÊü•ÊúçÂä°ÂÅ•Â∫∑Áä∂ÊÄÅ...
3. success: ‚úÖ ÊúçÂä°ÂèØÁî®
4. progress: Ê≠£Âú®Ê∏ÖÁ©∫ÂéÜÂè≤ÁªìÊûú...
5. success: Ê∏ÖÁ©∫ÂÆåÊàê
6. progress: Ê≠£Âú®‰∏ä‰º† Pipeline ÈÖçÁΩÆ...
7. success: Pipeline Â∑≤ÊàêÂäü‰∏ä‰º†Âπ∂Â∫îÁî®Âà∞ÊµãËØïÁéØÂ¢É
8. progress: Á≠âÂæÖ 3 ÁßíÁÉ≠ÈáçËΩΩ...
9. progress: ÁÉ≠ÈáçËΩΩ‰∏≠... 1/3s
10. progress: ÁÉ≠ÈáçËΩΩ‰∏≠... 2/3s
11. progress: ÁÉ≠ÈáçËΩΩ‰∏≠... 3/3s
12. success: ÁÉ≠ÈáçËΩΩÂÆåÊàê
13. progress: Ê≠£Âú®ÂèëÈÄÅÁ¨¨ 1/1 Êù°Êó•Âøó...
14. success: ‚úÖ Êó•ÂøóÂèëÈÄÅÊàêÂäü
15. progress: Ê≠£Âú®Ëé∑ÂèñÊúÄÁªàËß£ÊûêÁªìÊûú...
16. success: Ëé∑ÂèñÂà∞ 1 Êù°Ëß£ÊûêËÆ∞ÂΩï
17. progress: Ê≠£Âú®Ê£ÄÊü• Logstash ÈîôËØØÊó•Âøó...
18. success: Êú™ÂèëÁé∞ÈîôËØØ
19. complete: Pipeline ÊµãËØïÊµÅÁ®ãÂÆåÊàê
```

## üéØ AI ÈõÜÊàê‰ºòÂäø

### Áõ∏ÊØîÊ†áÂáÜ REST API

**‰º†Áªü REST API**:
- ‚ùå ÈïøÊó∂Èó¥Á≠âÂæÖÔºåÊó†Ê≥ïÁü•ÈÅìËøõÂ∫¶
- ‚ùå Âè™ËÉΩÁ≠âÂæÖÊúÄÁªàÁªìÊûú
- ‚ùå ÁΩëÁªúË∂ÖÊó∂ÈóÆÈ¢ò

**SSE ÊµÅÂºè API**:
- ‚úÖ **ÂÆûÊó∂ËøõÂ∫¶ÂèçÈ¶à**
- ‚úÖ **Ê≠•È™§Á∫ßÁä∂ÊÄÅÁõëÊéß**
- ‚úÖ **Âç≥Êó∂ÈîôËØØÂèçÈ¶à**
- ‚úÖ **Êõ¥Â•ΩÁöÑÁî®Êà∑‰ΩìÈ™å**

### AI ‰ΩøÁî®Âú∫ÊôØ

1. **ÈïøÊó∂Èó¥ÊµãËØï**: Â§çÊùÇ Pipeline ÈÖçÁΩÆÊµãËØï
2. **Â§öÊó•ÂøóÊµãËØï**: ÊâπÈáèÊó•ÂøóËß£ÊûêÈ™åËØÅ
3. **Ë∞ÉËØïÊ®°Âºè**: ÂÆûÊó∂ÁõëÊéßÊØè‰∏™Ê≠•È™§
4. **ËøõÂ∫¶Â±ïÁ§∫**: ÂêëÁî®Êà∑Â±ïÁ§∫ÊµãËØïËøõÂ∫¶

## üîß ÈÖçÁΩÆÂíåÈÉ®ÁΩ≤

### ÁéØÂ¢ÉÂèòÈáè

- `LOGSTASH_SERVICE_URL`: Logstash ÊµãËØïÊúçÂä°Âú∞ÂùÄÔºåÈªòËÆ§ `http://logstash-web:19000`
- `PORT`: ÊúçÂä°Á´ØÂè£ÔºåÈªòËÆ§ 19002

### Docker Compose Êõ¥Êñ∞

```yaml
version: "3.9"
services:
  # ... ÂÖ∂‰ªñÊúçÂä° ...
  
  sse-server:
    build: ./mcp_server
    command: python sse_mcp_server.py
    container_name: logstash-lab-sse
    ports:
      - "19002:19002"
    environment:
      - LOGSTASH_SERVICE_URL=http://web:19000
    depends_on:
      - web
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:19002/tools/health_check"]
      interval: 30s
      timeout: 10s
      retries: 3
```

### Nginx ÂèçÂêë‰ª£ÁêÜÈÖçÁΩÆ

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location /sse/ {
        proxy_pass http://localhost:19002/sse/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # SSE ÁâπÊÆäÈÖçÁΩÆ
        proxy_set_header Cache-Control no-cache;
        proxy_set_header Connection '';
        proxy_http_version 1.1;
        chunked_transfer_encoding off;
        proxy_buffering off;
        proxy_cache off;
    }
}
```

## üö® ÊïÖÈöúÊéíÈô§

### üîß Â∏∏ËßÅÈÖçÁΩÆÈîôËØØ

#### ‚ùå ÈîôËØØÁöÑ SSE ÈÖçÁΩÆ
```bash
# ÈîôËØØÔºöÁº∫Â∞ëÂÖ∑‰ΩìÁ´ØÁÇπ
@http://192.168.31.218:19001/sse
```

#### ‚úÖ Ê≠£Á°ÆÁöÑÈÖçÁΩÆ
```bash
# Ê≠£Á°ÆÔºöSSE ÊµÅÂºèÊµãËØïÁ´ØÁÇπ
http://192.168.31.218:19001/sse/test_pipeline_complete

# ÊàñËÄÖ‰ΩøÁî®ÊµãËØïÈ°µÈù¢ÔºàÊé®ËçêÔºâ
http://192.168.31.218:19001/test
```

### üõ†Ô∏è Docker ÊûÑÂª∫ÈóÆÈ¢ò

Â¶ÇÊûú‰øÆÊîπ‰ª£Á†ÅÂêéÂÆπÂô®Ê≤°ÊúâÊõ¥Êñ∞ÔºåÊåâ‰ª•‰∏ãÊ≠•È™§ÊéíÊü•Ôºö

```bash
# 1. Ê∏ÖÁêÜ Docker ÁºìÂ≠ò
sudo docker system prune -f

# 2. Âº∫Âà∂ÈáçÊñ∞ÊûÑÂª∫
sudo docker compose build --no-cache mcp-server

# 3. ÈáçÂêØÊúçÂä°
sudo docker compose restart mcp-server

# 4. È™åËØÅ‰ª£Á†ÅÊõ¥Êñ∞
sudo docker exec logstash-lab-mcp grep -n "Ê£ÄÊü•ÊòØÂê¶ÊòØÊñá‰ª∂‰∏ä‰º†" /app/mcp_server.py
```

### üîç ÊúçÂä°ÂÅ•Â∫∑Ê£ÄÊü•

```bash
# Ê£ÄÊü• MCP ÊúçÂä°Âô®Áä∂ÊÄÅ
curl http://localhost:19001/tools/health_check

# Ê£ÄÊü•ÂÆπÂô®Áä∂ÊÄÅ
sudo docker compose ps | grep mcp

# Êü•ÁúãËØ¶ÁªÜÊó•Âøó
sudo docker compose logs -f mcp-server

# Ê£ÄÊü•Á´ØÂè£ÁõëÂê¨
sudo netstat -tlnp | grep 19001
```

### üåê ÁΩëÁªúËøûÊé•ÈóÆÈ¢ò

```bash
# Ê£ÄÊü•ÂÆπÂô®ÁΩëÁªú
sudo docker network ls
sudo docker network inspect logstash-lab_default

# ÊµãËØïÂÆπÂô®Èó¥ÈÄö‰ø°
sudo docker exec logstash-lab-mcp curl -s http://web:19000/get_parsed_results

# Ê£ÄÊü•ÁéØÂ¢ÉÂèòÈáè
sudo docker exec logstash-lab-mcp env | grep LOGSTASH_SERVICE_URL
```

### üìã Â∏∏ËßÅÈóÆÈ¢ò

1. **SSE ËøûÊé•‰∏≠Êñ≠**
   - Ê£ÄÊü•ÁΩëÁªúÁ®≥ÂÆöÊÄß
   - Á°ÆËÆ§ÊúçÂä°Âô®Êú™Ë∂ÖÊó∂ÂÖ≥Èó≠ËøûÊé•
   - ÂÆ¢Êà∑Á´ØÂÆûÁé∞ÈáçËøûÊú∫Âà∂

2. **Êñá‰ª∂‰∏ä‰º†Â§±Ë¥•**
   - Á°ÆËÆ§Êñá‰ª∂Ê†ºÂºèÊ≠£Á°Æ
   - Ê£ÄÊü•Êñá‰ª∂Â§ßÂ∞èÈôêÂà∂
   - È™åËØÅÊñá‰ª∂ÁºñÁ†ÅÔºàUTF-8Ôºâ

3. **Pipeline Ëß£ÊûêÈîôËØØ**
   - È™åËØÅ Logstash ÈÖçÁΩÆËØ≠Ê≥ï
   - Ê£ÄÊü•ÁâπÊÆäÂ≠óÁ¨¶ËΩ¨‰πâ
   - Á°ÆËÆ§ filter ÂùóÊ†ºÂºèÊ≠£Á°Æ

### üß™ Ë∞ÉËØïÊäÄÂ∑ß

```bash
# Ê£ÄÊü• SSE ËøûÊé•
curl -N -H "Accept: text/event-stream" \
  "http://localhost:19001/sse/test_pipeline_complete?pipeline_content=filter{}&test_logs=[\"test\"]"

# ÊµãËØïÊñá‰ª∂‰∏ä‰º†
curl -X POST http://localhost:19001/tools/upload_pipeline \
  -F 'file=@test.conf' | jq '.'

# Ê£ÄÂÅ•Â∫∑Áä∂ÊÄÅ
curl http://localhost:19001/tools/health_check | jq '.'

# Êü•ÁúãÊúçÂä°Êó•Âøó
docker logs logstash-lab-sse
```

## üìà ÊÄßËÉΩ‰ºòÂåñ

- **ËøûÊé•ÁÆ°ÁêÜ**: Ëá™Âä®Ê∏ÖÁêÜÊñ≠ÂºÄÁöÑËøûÊé•
- **‰∫ã‰ª∂ÁºìÂÜ≤**: ÈÅøÂÖç‰∫ã‰ª∂‰∏¢Â§±
- **ÈîôËØØÊÅ¢Â§ç**: ‰ºòÈõÖÂ§ÑÁêÜËøûÊé•‰∏≠Êñ≠
- **ËµÑÊ∫êÊ∏ÖÁêÜ**: ÂèäÊó∂ÈáäÊîæËµÑÊ∫ê

---

**SSE MCP Server ËÆ© AI ËÉΩÂ§üÂÆûÊó∂ÁõëÊéß Logstash ÊµãËØïÊµÅÁ®ãÔºÅ** üåä
